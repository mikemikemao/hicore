#PROJECT(libosip2 C)
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

# include
INCLUDE_DIRECTORIES(.)
INCLUDE_DIRECTORIES(include)
INCLUDE_DIRECTORIES(src/osip2)
INCLUDE_DIRECTORIES(src/osipparser2)

ADD_DEFINITIONS(
	-DHAVE_CONFIG_H
	-DOSIP_MT
	-DHAVE_PTHREAD
	-DENABLE_TRACE
	#-DSYSTEM_LOGGER_ENABLED
	)

AUX_SOURCE_DIRECTORY(src/osipparser2 SRCS_OSIPPARSER2 )
AUX_SOURCE_DIRECTORY(src/osip2 SRCS_OSIP2       )

ADD_LIBRARY( osipparser2 SHARED ${SRCS_OSIPPARSER2} )
ADD_LIBRARY( osip2 SHARED ${SRCS_OSIP2})


#IF (VENUS_PLATFORM STREQUAL R2)
	FIND_LIBRARY(log-lib log)
	TARGET_LINK_LIBRARIES(osipparser2 ${log-lib})
	TARGET_LINK_LIBRARIES(osip2 ${log-lib} osipparser2)
#ENDIF()

INSTALL( TARGETS osipparser2 DESTINATION ${INSTALL_PATH}/lib )
INSTALL( TARGETS osip2 DESTINATION ${INSTALL_PATH}/lib )

INSTALL(DIRECTORY include/osipparser2 DESTINATION ${INSTALL_PATH}/include)
INSTALL(DIRECTORY include/osip2 DESTINATION ${INSTALL_PATH}/include)
